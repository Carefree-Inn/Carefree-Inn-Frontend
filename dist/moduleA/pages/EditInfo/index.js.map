{"version":3,"file":"moduleA/pages/EditInfo/index.js","sources":["webpack:///._src_moduleA_pages_EditInfo_index.jsx","webpack:///._src_Images_confirm.png","webpack:///./src/moduleA/pages/EditInfo/index.jsx?dd6d","webpack:///._src_moduleA_pages_EditInfo_index.less"],"sourcesContent":["import Taro from '@tarojs/taro'\nimport { View, Image,Text, Input, Radio, Button} from '@tarojs/components'\nimport { useState,useEffect } from 'react'\nimport { getJson,putData } from '../../../Service/fetch'\nimport confirm from '../../../Images/confirm.png'\nimport './index.less'\n\nconst Edit=()=>{\n\n    const [username,setUsername] = useState('')\n    const [sex,setSex] = useState(0)\n    const [avatar,setAvatar] = useState('')\n\n    useEffect(()=>\n  {\n    getJson('/user/profile',{})\n    .then(res=>{\n        setUsername(res.data.nickname)\n        setAvatar(res.data.avatar) \n        setSex(res.data.sex)\n        console.log(res.data)\n  })},[])\n\n    function changeName(e){\n        console.log(e.detail.value)\n        setUsername(e.detail.value)\n    }\n\n    function handleconfirm (){\n        //提交昵称\n        const data = {\n            nickname:username,\n            sex,\n            avatar\n        }\n\n        putData('/user/profile',data)\n        .then(res=>{\n            console.log(res)\n            Taro.showToast({\n                title:'修改成功！',\n                icon:'success'\n            })\n        })\n        .catch((error)=>{\n            console.log(error)\n        })\n    }\n\n//上传头像\n    function changeAvatar(){\n        Taro.chooseImage({\n            count: 1, // 默认9\n            sizeType: ['original', 'compressed'], // 可以指定是原图还是压缩图，默认二者都有\n            sourceType: ['album'], // 可以指定来源是相册还是相机，默认二者都有，在H5浏览器端支持使用 `user` 和 `environment`分别指定为前后摄像头\n            success: function (res) {\n              // 返回选定照片的本地文件路径列表，tempFilePath可以作为img标签的src属性显示图片\n              var path = res.tempFilePaths[0]\n              Taro.uploadFile({\n                url: 'http://139.196.30.123:8080/inn/api/v1/upload/file',\n                filePath: path,\n                name: 'image',\n                success(ress){\n                    const resData = JSON.parse(ress.data)\n                    setAvatar(resData.data)\n                    console.log(resData)\n                }\n            })\n             // console.log(tempFilePaths)\n            }\n    })}\n\n    //七牛云\n\n\n    return(\n    <>\n        <View className='Edit'>\n            <View className='Avatar' onClick={changeAvatar}>\n                <Image src={avatar}></Image>\n            </View>\n            <View className='user-sex'>\n                <View className='sex' >性别</View>\n                <View className='sex-radio'>\n                    <Radio value='男' onClick={() => setSex(0)} color='#E4ACAC' checked={sex === 0?true:false}>男</Radio>\n                    <Radio value='女' onClick={() => setSex(1)} color='#E4ACAC' checked={sex === 1?true:false}>女</Radio>\n                </View>\n            </View>\n            <View className='uid'>\n                <Text >昵称</Text>\n                <Input value={username} placeholder={username} onInput={changeName}  />\n            </View>\n            <Button className='submit' src={confirm} onClick={handleconfirm}>提交</Button>\n        </View>\n    </>   \n    )\n    \n}\n\nexport default Edit;","module.exports = __webpack_public_path__ + \"Images/confirm.png\";","import { createPageConfig } from '@tarojs/runtime'\nimport component from \"../../../../node_modules/babel-loader/lib/index.js!./index.jsx\"\nvar config = {\"navigationBarTitleText\":\"信息编辑\"};\n\n\nvar inst = Page(createPageConfig(component, 'moduleA/pages/EditInfo/index', {root:{cn:[]}}, config || {}))\n\n\n","// extracted by mini-css-extract-plugin"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAEA;AAEA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAEA;AAEA;AAEA;AACA;AACA;AACA;AACA;AAAA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAEA;AACA;AACA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AAEA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAEA;AAAA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAIA;AAEA;;;;;;;;;;;;ACnGA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACPA;;;;A","sourceRoot":""}