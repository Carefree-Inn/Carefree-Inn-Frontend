{"version":3,"file":"common.js","sources":["webpack:///._src_Components_MyPost_index.jsx","webpack:///._src_Components_MyPost_index.less","webpack:///._src_Images_close.png","webpack:///._src_Images_like-fill.svg","webpack:///._src_Images_like.svg","webpack:///._src_Images_message.svg","webpack:///._src_Images_more.svg","webpack:///._src_Service_fet.jsx"],"sourcesContent":["import Taro from \"@tarojs/taro\";\nimport {Image, Radio, Text, View,Textarea, Button} from \"@tarojs/components\";\nimport { useState } from \"react\";\nimport { deleteData, postData } from \"../../Service/fet\";\nimport more from \"../../Images/more.svg\";\nimport like from \"../../Images/like.svg\";\nimport likefill from \"../../Images/like-fill.svg\";\nimport close from '../../Images/close.png'\nimport message from \"../../Images/message.svg\";\nimport \"./index.less\";\n\nconst Mypost = (props) => {\n    /* 我发布的 页面帖子组件 */\n\n    const [show,setShow] = useState(false)\n    const {nickname, avatar, content,liked, create_time, likes, comments, id, category} = props\n    \n    const [feedback,setFeedback] = useState('')//反馈类型\n    const [modal,setModal] = useState(false)\n    const [reportvalue,setReportvalue] = useState('')//反馈内容\n    \n  const goArticle = () => {\n    Taro.navigateTo({\n      url: `/moduleB/pages/Article/index?post_id=${id}`,\n      \n    })\n  }\n\n//显示举报\n  function showReport(){\n    setShow(!show)\n  }\n\n  function report(){\n    //showmodal\n    setModal(true)\n  }\n\n  function closeModal(){\n    setModal(false)\n    setShow(!show)\n  }\n\nfunction handleInput(e){\n    console.log(e.detail.value)\n    setReportvalue(e.detail.value)\n}\n\n//提交反馈举报\n  function handleSubmit(){\n    if(feedback == '')\n    {\n        Taro.showModal({\n            title: '提示',\n            content: '请选择举报类型!!',\n            success: function (res) {\n                if (res.confirm) {\n                console.log('用户点击确定')\n                } else if (res.cancel) {\n                console.log('用户点击取消')\n                }\n            }\n        })\n        return\n    }\n    if(reportvalue=='')\n    {\n        Taro.showModal({\n            title: '提示',\n            content: '请输入详细举报理由!',\n            success: function (res) {\n                if (res.confirm) {\n                console.log('用户点击确定')\n                } else if (res.cancel) {\n                console.log('用户点击取消')\n                }\n            }\n        })\n        return\n    }\n    console.log('submit')\n    const data = {\n        content:reportvalue,\n        post_id:id,\n        feedback_type:feedback\n    }\n\n    postData('/user/feedback',data)\n    .then(res=>{\n        console.log(res)\n        Taro.showToast({\n            title: '举报成功',\n            icon: 'success',\n            duration: 1000\n        })\n        setModal(false)\n        setShow(false)\n    }).catch((error)=>{\n        console.log(error)\n        Taro.showToast({\n            title: '举报失败,请稍后再试',\n            icon: 'error',\n            duration: 2000\n        })\n    })\n\n\n  }\n\n  function handleDelete(){\n\n    Taro.showModal({\n        title: '提示',\n        content: '确认删除这个帖子吗?',\n        success: function (res) {\n          if (res.confirm) {\n            console.log('用户点击确定')\n            deleteData(\n                '/post?post_id=' + id\n                ).then(ress=>{\n                    console.log(ress)\n                    Taro.showToast({\n                        title: '删除成功!',\n                        icon: 'success',\n                        duration: 2000\n                      })\n                }).catch((error)=>{\n                    console.log(error)\n                })\n          } else if (res.cancel) {\n            console.log('用户点击取消')\n          }\n  }} )\n  \n  }\n\n  return (\n<>\n    <View className='card'>\n      <View className='cardInfo'>\n        <View className='cardUser'>\n          <Image className='cardUserImg' src={avatar} />\n          <Text className='cardUserName'>{nickname}</Text>\n        </View>\n        <View className='cardMore'>\n            <View className='more'>\n                <Image className='cardMoreInfo' src={more}  onClick={showReport} />\n                <View className={show?'report':'none'} onClick={report}>举报</View>\n                <View className={show?'delete':'none'} onClick={handleDelete}>删除</View>\n            </View>\n          <View><Text className='cardTime'>{create_time}</Text></View>\n        </View>\n      </View>\n      <View className='cardContent' onClick={goArticle}>\n        <Text className='cardContentText'>{content}</Text>\n        <Image className='cardContentImage' src='' />\n        <Image className='cardContentImage' src='' />\n        <Image className='cardContentImage' src='' />\n        <Image className='cardContentImage' src='' />\n      </View>\n      <View className='card_bottom'>\n            <View className='category'>{category}</View>{/* 分区 */}\n            <View className='cardLikeBox'>\n                <View className='cardLikeBox2'>\n                    <View className='box3'>\n                        <Image className='cardLike' src={liked ? likefill : like} />\n                        <View className='num'>{likes}</View>\n                    </View>\n                    <View className='box3'>\n                        <Image className='cardLike' src={message} />\n                        <View className='num'>{comments}</View>\n                    </View>\n                </View>\n            </View>\n        </View>\n    </View>\n    <View className='m_box' style={{display: modal?'block':'none'}}>\n        <View className='modal' >\n            <View className='close' onClick={closeModal}>\n                <Image src={close} />\n            </View>\n            <View className='choose'>\n                <Radio className='radio' value='言语辱骂' onClick={()=>setFeedback('言语辱骂')} color='#E4ACAC' checked={feedback==='言语辱骂'?true:false}>言语辱骂</Radio>\n                <Radio className='radio' value='人身攻击' onClick={() => setFeedback('人身攻击')} color='#E4ACAC' checked={feedback==='人身攻击'?true:false}>人身攻击</Radio>\n                <Radio className='radio'value='色情暴力' onClick={() => setFeedback('色情暴力')} color='#E4ACAC' checked={feedback==='色情暴力'?true:false}>色情暴力</Radio>\n                <Radio className='radio' value='虚假广告' onClick={() => setFeedback('虚假广告')} color='#E4ACAC' checked={feedback==='虚假广告'?true:false}>虚假广告</Radio>\n                <Radio className='radio' value='都不是' onClick={() => setFeedback('都不是')} color='#E4ACAC' checked={feedback==='都不是'?true:false}>都不是</Radio>\n            </View>\n            <View className='input'>\n                <Textarea placeholder='请说明举报理由'  value={reportvalue} onInput={(e)=>handleInput(e)}></Textarea>\n            </View>\n            <Button className='submit' onClick={()=>handleSubmit()}>提交</Button>\n        </View>\n    </View>\n</>\n  )\n}\n\nexport default Mypost;","// extracted by mini-css-extract-plugin","module.exports = __webpack_public_path__ + \"Images/close.png\";","module.exports = \"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/PjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+PHN2ZyB0PSIxNjgxNjcwNjY0MTM3IiBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHAtaWQ9IjM4MjkiIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCI+PHBhdGggZD0iTTg4NS45IDUzMy43YzE2LjgtMjIuMiAyNi4xLTQ5LjQgMjYuMS03Ny43IDAtNDQuOS0yNS4xLTg3LjQtNjUuNS0xMTEuMWE2Ny42NyA2Ny42NyAwIDAgMC0zNC4zLTkuM0g1NzIuNGw2LTEyMi45YzEuNC0yOS43LTkuMS01Ny45LTI5LjUtNzkuNC0yMC41LTIxLjUtNDguMS0zMy40LTc3LjktMzMuNC01MiAwLTk4IDM1LTExMS44IDg1LjFsLTg1LjkgMzExaC0wLjN2NDI4aDQ3Mi4zYzkuMiAwIDE4LjItMS44IDI2LjUtNS40IDQ3LjYtMjAuMyA3OC4zLTY2LjggNzguMy0xMTguNCAwLTEyLjYtMS44LTI1LTUuNC0zNyAxNi44LTIyLjIgMjYuMS00OS40IDI2LjEtNzcuNyAwLTEyLjYtMS44LTI1LTUuNC0zNyAxNi44LTIyLjIgMjYuMS00OS40IDI2LjEtNzcuNy0wLjItMTIuNi0yLTI1LjEtNS42LTM3LjF6TTExMiA1Mjh2MzY0YzAgMTcuNyAxNC4zIDMyIDMyIDMyaDY1VjQ5NmgtNjVjLTE3LjcgMC0zMiAxNC4zLTMyIDMyeiIgcC1pZD0iMzgzMCI+PC9wYXRoPjwvc3ZnPg==\"","module.exports = __webpack_public_path__ + \"Images/like.svg\";","module.exports = __webpack_public_path__ + \"Images/message.svg\";","module.exports = \"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/PjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+PHN2ZyB0PSIxNjgxNDA2MjgwNjEzIiBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHAtaWQ9IjI2MjYiIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCI+PHBhdGggZD0iTTI0My4yIDUxMm0tODMuMiAwYTEuMyAxLjMgMCAxIDAgMTY2LjQgMCAxLjMgMS4zIDAgMSAwLTE2Ni40IDBaIiBwLWlkPSIyNjI3Ij48L3BhdGg+PHBhdGggZD0iTTUxMiA1MTJtLTgzLjIgMGExLjMgMS4zIDAgMSAwIDE2Ni40IDAgMS4zIDEuMyAwIDEgMC0xNjYuNCAwWiIgcC1pZD0iMjYyOCI+PC9wYXRoPjxwYXRoIGQ9Ik03ODAuOCA1MTJtLTgzLjIgMGExLjMgMS4zIDAgMSAwIDE2Ni40IDAgMS4zIDEuMyAwIDEgMC0xNjYuNCAwWiIgcC1pZD0iMjYyOSI+PC9wYXRoPjwvc3ZnPg==\"","import Taro from '@tarojs/taro';\n\n\nconst preUrl = 'http://139.196.30.123:8080/inn/api/v1';\nconst Fetch = (url, data = {}, method) => {\n  const header = {\n    'content-type': 'application/json',\n    'Authorization':'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBY2NvdW50IjoiMjAyMTIxMzk3NSIsImV4cCI6MTY4ODM3NDQ5NiwiaXNzIjoiQ0NOVS1Jbm4ifQ.OvRlQ6rJ4xDbGSb1tmhcSfGYE0YEe2Ms6QH4xOijayY'/*  Taro.getStorageSync('token') */\n  };\n\n  return Taro.request({\n    url: url,\n    data,\n    method,\n    header\n  }).then(res => {\n    switch (res.statusCode) {\n      case 200: {\n        if (res.data) {\n          return res.data;\n        } else {\n          return res.errMsg;\n        }\n      }\n      case 400:\n        throw new Error('没有权限访问');\n      case 401:\n        return res.data;\n      case 404:\n        throw new Error('not found');\n      case 500:\n        throw new Error('服务器错误');\n      default:\n        throw new Error(res.errMsg)\n    }\n  }).catch((e) => {\n    console.log(e)\n  })\n};\n\n\nexport async function postData(url = '', data = {}) {\n\n  return await Fetch(preUrl + url, JSON.stringify(data), 'POST');\n}\n\nexport async function getJson(url = '', data = {}) {\n\n  return await Fetch(preUrl + url, JSON.stringify(data), 'GET');\n}\n\nexport async function putData(url = '', data = {}) {\n\n  return await Fetch(preUrl + url, JSON.stringify(data), 'PUT');\n}\n\nexport async function deleteData(url = '', data = {}) {\n\n    return await Fetch(preUrl + url, JSON.stringify(data), 'DELETE');\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAEA;AAEA;AACA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAEA;AAAA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAEA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAEA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAEA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AAEA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AAEA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAGA;AAEA;;;;;;;;;;;ACtMA;;;;;;;;;;;;ACAA;;;;;;;;;;;;ACAA;;;;;;;;;;;;ACAA;;;;;;;;;;;;ACAA;;;;;;;;;;;;ACAA;;;;;;;;;;;;;;;;;;;;;;;ACAA;AAGA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAEA;AACA;AACA;AACA;AAGA;AAAA;AAAA;AAGA;AAAA;AAHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAEA;AAAA;AAAA;AAGA;AAAA;AAHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAEA;AAAA;AAAA;AAGA;AAAA;AAHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAEA;AAAA;AAAA;AAGA;AAAA;AAHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;;;;A","sourceRoot":""}